<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='styles/homepage.css') }}"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Jomhuria&family=Sigmar&family=Sigmar+One&display=swap"
      rel="stylesheet"
    />

    <title>Homepage</title>
  </head>
  <body>
    <div class="cloudstop">
      <img
        src="{{ url_for('static', filename='styles/images/Group 129.png') }}"
        style="width: 100%; display: block"
      />
    </div>

    <h1 class="title">Homepage</h1>

    <div class="container">
      <div class="btncontainer">
        <a href="/account-info" id="accountIcn">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="221"
            height="246"
            viewBox="0 0 221 246"
            fill="none"
          >
            <path
              d="M24.5557 0.5H196.444C209.686 0.5 220.5 11.0452 220.5 23.9033V191.23C220.5 204.089 209.686 214.634 196.444 214.634H147.131L146.985 214.775L118.746 242.146C114.152 246.618 106.726 246.618 102.132 242.146L74.0156 214.776L73.8701 214.634H24.5557C11.3135 214.634 0.500034 204.089 0.5 191.23V23.9033L0.507812 23.3027C0.834788 10.7169 11.4012 0.5 24.5557 0.5ZM110.5 119.019C98.1556 119.019 79.6751 122.32 64.2695 128.618C56.5661 131.768 49.5997 135.679 44.5518 140.328C39.5019 144.979 36.333 150.407 36.333 156.57V167.826H184.667V156.57C184.667 150.407 181.498 144.979 176.448 140.328C171.4 135.679 164.434 131.768 156.73 128.618C141.325 122.32 122.844 119.019 110.5 119.019ZM110.5 38.9414C91.9429 38.9414 76.8499 53.6141 76.8496 71.7109C76.8496 89.808 91.9427 104.481 110.5 104.481C129.057 104.481 144.15 89.808 144.15 71.7109C144.15 53.6141 129.057 38.9414 110.5 38.9414Z"
              fill="url(#paint0_linear_48_940)"
              stroke="white"
            />
            <defs>
              <linearGradient
                id="paint0_linear_48_940"
                x1="221"
                y1="123"
                x2="0"
                y2="123"
                gradientUnits="userSpaceOnUse"
              >
                <stop stop-color="#F597CF" />
                <stop offset="1" stop-color="#83DAF2" />
              </linearGradient>
            </defs>
          </svg>
        </a>
        <<a href="/account-info" id="accountBtn">Account Information</a>
      </div>

      <div class="btncontainer">
        <button id="filesIcn">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="256"
            height="250"
            viewBox="0 0 256 250"
            fill="none"
          >
            <g clip-path="url(#clip0_48_1008)">
              <path
                d="M10.6667 125C10.6667 41.6667 42.6667 10.4167 128 10.4167C213.333 10.4167 245.333 41.6667 245.333 125C245.333 208.333 213.333 239.583 128 239.583C42.6667 239.583 10.6667 208.333 10.6667 125Z"
                fill="url(#paint0_linear_48_1008)"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M81.4933 89.8957H131.093L128.853 82.2916C128.169 80.0772 126.749 78.1484 124.817 76.8093C122.886 75.4702 120.553 74.797 118.187 74.8957H74.6667C71.8377 74.8957 69.1246 75.9932 67.1242 77.9467C65.1238 79.9002 64 82.5497 64 85.3124V106.875C64 104.636 64.4532 102.42 65.3336 100.353C66.214 98.2863 67.5043 96.4099 69.1301 94.8318C70.7559 93.2538 72.6852 92.0053 74.807 91.1582C76.9288 90.311 79.2011 89.882 81.4933 89.8957Z"
                fill="#ECE2F1"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M181.333 175.104H74.6667C71.8377 175.104 69.1246 174.007 67.1242 172.053C65.1238 170.1 64 167.45 64 164.687V100.312C64 97.5497 65.1238 94.9002 67.1242 92.9467C69.1246 90.9932 71.8377 89.8958 74.6667 89.8958H181.333C184.162 89.8958 186.875 90.9932 188.876 92.9467C190.876 94.9002 192 97.5497 192 100.312V164.687C192 166.055 191.724 167.41 191.188 168.674C190.652 169.938 189.866 171.086 188.876 172.053C187.885 173.02 186.709 173.788 185.415 174.311C184.121 174.835 182.734 175.104 181.333 175.104Z"
                fill="#E1E8F5"
              />
            </g>
            <defs>
              <linearGradient
                id="paint0_linear_48_1008"
                x1="128"
                y1="10.4167"
                x2="128"
                y2="239.583"
                gradientUnits="userSpaceOnUse"
              >
                <stop stop-color="#83DAF2" />
                <stop offset="1" stop-color="#F597CF" />
              </linearGradient>
              <clipPath id="clip0_48_1008">
                <rect width="256" height="250" fill="white" />
              </clipPath>
            </defs>
          </svg>
        </button>
        <button id="filesBtn">Access Files</button>
      </div>
    </div>

    <button id="logoutBtn">Logout</button>

    <div class="cloudsbot">
      <img
        src="{{ url_for('static', filename='styles/images/Group 126.png') }}"
        style="width: 100%; display: block"
      />
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
      const SUPABASE_URL = "https://porcvcjxmjwpmhpvqckj.supabase.co";
      const SUPABASE_ANON_KEY =
        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBvcmN2Y2p4bWp3cG1ocHZxY2tqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjEyNzc4MzYsImV4cCI6MjA3Njg1MzgzNn0.r0CHtaPGHNfCe4SAm4MwBq8vAyyadYEbJhgI1g1LpEU";
      const supabase = window.supabase.createClient(
        SUPABASE_URL,
        SUPABASE_ANON_KEY,
        {
          auth: {
            persistSession: true,
            autoRefreshToken: true,
            detectSessionInUrl: false,
          },
        }
      );

      // Logout button handler
      document
        .getElementById("logoutBtn")
        .addEventListener("click", async () => {
          await supabase.auth.signOut();
          window.location.href = "/";
        });

      // Check if user is logged in
      async function checkAuth() {
        const {
          data: { session },
        } = await supabase.auth.getSession();

        if (!session) {
          // Redirect to login if not authenticated
          window.location.href = "/";
        }
      }

      // Disabled button click handler
      document.getElementById("filesBtn").addEventListener("click", (e) => {
        e.preventDefault();
        alert("This feature is not yet available.");
      });

      // Check authentication on page load
      checkAuth();
    </script>
  </body>
</html>
